<%@page import="vo.ProductVO"%>
<%@page import="dao.ProductRepository"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%
	// form : product.jsp
	// to   : post방식으로 addCart.jsp?productId=P1234
	String productId = request.getParameter("productId");	//P1234
	
	out.print("productId : " + productId);
	
	// trim() : 공백제거
	// addCart.jsp  or  addCart.jsp?productId=
	if(productId == null || productId.trim().equals("")) {
		response.sendRedirect("products.jsp");
		return;
	}
	
	// 기본키인 P1234 코드의 상품을 찾아보자
	// 싱글톤 패턴으로 공유되어 있는 객체를 1회 생성
	ProductRepository dao = ProductRepository.getInstance();
	
	// select * from product where id = 'P1234'
	ProductVO prod = dao.getProductById(productId);
	
	// 만약 상품 결과가 없으면
	if(prod == null) {
		//[상품이 없음] 예외처리 페이지로 강제 이동
		response.sendRedirect("exceptionNoProduct.jsp")
	}
	
%>